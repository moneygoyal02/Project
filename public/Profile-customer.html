<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile-customer</title>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <style>
      #img-preview {
        max-width: 100%;
        max-height: 200px;
        margin-top: 10px;
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    

    <!-- -------------------------------------------------------search-------------------------- -->


    <script>
      $(document).ready(function(){
        $("#srch").click(function(){

          let obj= {
            url: "/search",

            data: {
              

              email : $("#EmailAdd").val(),
            }
          };

          $.ajax(obj).done(function(ary){

            // alert(JSON.stringify(ary));
            $("#Name").val(ary[0].FName);
            $("#contact").val(ary[0].contact);
            $("#Addr").val(ary[0].address);
            $("#State").val(ary[0].state);
            $("#City").val(ary[0].city);
            
            
            $("#img-preview").prop("src","/uploads/"+ary[0].ppic);

            $("#hdn").val(ary[0].ppic);

          }).fail(function(err){
            alert("Error=" + err)
          })

        })


      })
    </script>

    <!-- ------------------------------------------image preview------------------------------------------- -->

    <script>
      function previewImage(input) {
        var preview = document.getElementById("img-preview");
        var file = input.files[0];
        var reader = new FileReader();

        reader.onloadend = function () {
          preview.src = reader.result;
          preview.classList.remove("d-none");
        };

        if (file) {
          reader.readAsDataURL(file);
        } else {
          preview.src = "";
          preview.classList.add("d-none");
        }
      }
    </script>

<script>
     
  function fetchUser()
   {
     let activeUser=localStorage.getItem("activeUser");
     document.querySelector("#EmailAdd").value=activeUser;
   }
 </script>
  </head>
  <body onload="fetchUser()">
    <nav class="navbar navbar-expand-lg navbar-light bg-light" >
      <div class="container-fluid" >
        <a href="/customer-Dash.html" style="text-decoration: none"
          ><h5 class="navbar-brand" style="margin-left: 50px">
            Samadhaan.com
          </h5></a
        >
    
       
    
      
      </div>
    </nav>

    <form action="/saveee" method="post" enctype="multipart/form-data" >
      <input type="hidden" id="hdn" name="hdn" >
    <div
      class="container d-flex justify-content-center"
      style="
        margin-top: 3%;
        width: 40%;
        background-color: white;
        border-radius: 10px;
       
        border-style: groove;
      "
    >
      <div class="row mt-2 mb-3 g-3 needs-validation" novalidate>
        <!-- ---------------------------HEADER---------------------------------------- -->
        <div class="row mb-2">
          <center>
            <p style="font-size: 24px">Customer Profile</p>
          </center>
        </div>

        <!-- --------------------email-add-row------------------------------------- -->
        <div class="row align-items-end">
          <div class="col-md-7">
            <label for="EmailAdd" class="form-label">Email Id</label>
            <input
              type="text"
              class="form-control"
              id="EmailAdd"
              name="email"
              placeholder="Enter your Email address"
             readonly
              required
            />
          </div>

          <div class="col-md-5 mt-2">
            <button class="btn btn-primary" id="srch" type="button">
              Search
            </button>
          </div>
        </div>
        <!-- -------------------------NAME------------------------------------------------------- -->

        <div class="col-md-6">
          <label for="Name" class="form-label">Name</label>
          <input type="text" name="name" class="form-control" id="Name" required />
        </div>

        <!-- -------------------------CONTACT NUMBER------------------------------------------------------- -->

        <div class="col-md-5">
          <label for="contact" class="form-label">Contact Number</label>
          <div class="input-group has-validation">
            <input type="text" name="contact" maxlength="10" class="form-control" id="contact" required />
          </div>
        </div>

        <!-- --------------------------ADDRESS------------------------------------------------------ -->

        <div class="col-md-11">
          <label for="Addr" class="form-label">Address</label>
          <input type="text" name="address" class="form-control" id="Addr" required />
        </div>

        <!-- --------------------------STATE-------------------------------------------- -->
        <div class="col-md-6">
          <label for="State" class="form-label">State</label>
          <select class="form-select" name="state" id="State" name="State" required>
            <option selected disabled value="">Choose...</option>
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
            <option value="Assam">Assam</option>
            <option value="Bihar">Bihar</option>
            <option value="Chhattisgarh">Chhattisgarh</option>
            <option value="Goa">Goa</option>
            <option value="Gujarat">Gujarat</option>
            <option value="Haryana">Haryana</option>
            <option value="Himachal Pradesh">Himachal Pradesh</option>
            <option value="Jharkhand">Jharkhand</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Kerala">Kerala</option>
            <option value="Madhya Pradesh">Madhya Pradesh</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Manipur">Manipur</option>
            <option value="Meghalaya">Meghalaya</option>
            <option value="Mizoram">Mizoram</option>
            <option value="Nagaland">Nagaland</option>
            <option value="Odisha">Odisha</option>
            <option value="Punjab">Punjab</option>
            <option value="Rajasthan">Rajasthan</option>
            <option value="Sikkim">Sikkim</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Telangana">Telangana</option>
            <option value="Tripura">Tripura</option>
            <option value="Uttar Pradesh">Uttar Pradesh</option>
            <option value="Uttarakhand">Uttarakhand</option>
            <option value="West Bengal">West Bengal</option>
            <option value="Andaman and Nicobar Islands">
              Andaman and Nicobar Islands
            </option>
            <option value="Chandigarh">Chandigarh</option>
            <option value="Dadra and Nagar Haveli and Daman and Diu">
              Dadra and Nagar Haveli and Daman and Diu
            </option>
            <option value="Lakshadweep">Lakshadweep</option>
            <option value="Delhi">Delhi</option>
            <option value="Puducherry">Puducherry</option>
          </select>
        </div>

        <!-- ------------------------CITY------------------------------------------- -->

        <div class="col-md-5">
          <label for="City" class="form-label">City</label>
          <input type="text" name="city" class="form-control" id="City" required />
        </div>

        <!-- -----------------------------profile pic------------------------------------------ -->

        <div class="col-md-5">
          <label for="ppic" class="form-label">Profile Pic</label>
          <div class="input-group">
            <input
              type="file"
              name="ppic"
              class="form-control"
              id="ppic"
              src=""
              aria-describedby="inputGroupFileAddon04"
             
              aria-label="Upload"
              onchange="previewImage(this)"
            />
          </div>
        </div>

        <div class="col-md-5">
          <img id="img-preview" src="" alt=""  />
          
        </div>

        <!-- ----------------------------CHECK BOX---------------------------------------------------- -->
        <div class="col-12">
          <div class="form-check">
            <label class="form-check-label" for="invalidCheck">
              Agree to terms and conditions
            </label>
            <input
              class="form-check-input"
              type="checkbox"
              value="checked"
              id="invalidCheck"
              name="checkbox"
              required
            />
          </div>
        </div>
        <!-- -------------------------------------------------------------------------------- -->
        <div class="col-12 text-center">
          <button class="btn btn-primary" id="savebtn" type="submit">
            Save
          </button>
          <button class="btn btn-primary" id="updbtn" type="submit" formaction="/update">Update</button>
        </div>

      </div>
    </div>

  </form>

 
  </body>
</html>
